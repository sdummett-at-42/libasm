# **************************************************************************** #
#       COMANDS                                                                #
# **************************************************************************** #
NASM		=	nasm
AR			=	ar
ARFLAGS		=	rcs
RM			=	rm

# **************************************************************************** #
#       TITLE                                                                  #
# **************************************************************************** #
NAME		=	libasm.a

# **************************************************************************** #
#       FLAGS                                                                  #
# **************************************************************************** #
NASMFLAGS	=	-felf64
INCS		=	-Iincs
RMFLAGS		=	-rf

# **************************************************************************** #
#       SOURCES                                                                #
# **************************************************************************** #
SRCS		=	srcs/ft_strlen.s \
				srcs/ft_strcpy.s
# srcs/ft_strcpy.s

# **************************************************************************** #
#       RULES                                                                  #
# **************************************************************************** #
OBJS		=	$(SRCS:.s=.o)

%.o			:	%.s
				$(NASM) $(NASMFLAGS) $< -o $@

$(NAME)		:	$(OBJS)
				$(AR) $(ARFLAGS) $(NAME) $(OBJS)

all			:	$(NAME) test

test		:	$(NAME)
				gcc -Iincs main.c libasm.a
				./a.out

clean		:
				$(RM) $(RMFLAGS) $(OBJS)

fclean		:	clean
				$(RM) $(RMFLAGS) $(NAME) a.out

re			:	fclean all

# **************************************************************************** #
#       PHONY                                                                  #
# **************************************************************************** #
.PHONY		:	all clean fclean re test